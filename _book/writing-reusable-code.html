<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Team Programming for Scientists</title>
  <meta name="description" content="A short introduction to software engineering for scientists">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Team Programming for Scientists" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A short introduction to software engineering for scientists" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Team Programming for Scientists" />
  
  <meta name="twitter:description" content="A short introduction to software engineering for scientists" />
  

<meta name="author" content="Paweł Piątkowski">


<meta name="date" content="2018-04-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="version-control-systems-git.html">
<link rel="next" href="unit-tests.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="version-control-systems-git.html"><a href="version-control-systems-git.html"><i class="fa fa-check"></i><b>2</b> Version control systems: git</a><ul>
<li class="chapter" data-level="2.1" data-path="version-control-systems-git.html"><a href="version-control-systems-git.html#cloning-a-repository"><i class="fa fa-check"></i><b>2.1</b> Cloning a repository</a></li>
<li class="chapter" data-level="2.2" data-path="version-control-systems-git.html"><a href="version-control-systems-git.html#committing-changes"><i class="fa fa-check"></i><b>2.2</b> Committing changes</a></li>
<li class="chapter" data-level="2.3" data-path="version-control-systems-git.html"><a href="version-control-systems-git.html#working-on-branches"><i class="fa fa-check"></i><b>2.3</b> Working on branches</a></li>
<li class="chapter" data-level="2.4" data-path="version-control-systems-git.html"><a href="version-control-systems-git.html#pull-requests"><i class="fa fa-check"></i><b>2.4</b> Pull requests</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="writing-reusable-code.html"><a href="writing-reusable-code.html"><i class="fa fa-check"></i><b>3</b> Writing reusable code</a><ul>
<li class="chapter" data-level="3.1" data-path="writing-reusable-code.html"><a href="writing-reusable-code.html#r-packages"><i class="fa fa-check"></i><b>3.1</b> R packages</a></li>
<li class="chapter" data-level="3.2" data-path="writing-reusable-code.html"><a href="writing-reusable-code.html#good-practices"><i class="fa fa-check"></i><b>3.2</b> Good practices</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="unit-tests.html"><a href="unit-tests.html"><i class="fa fa-check"></i><b>4</b> Unit tests</a><ul>
<li class="chapter" data-level="4.1" data-path="unit-tests.html"><a href="unit-tests.html#an-ideal-unit-test"><i class="fa fa-check"></i><b>4.1</b> An ideal unit test</a></li>
<li class="chapter" data-level="4.2" data-path="unit-tests.html"><a href="unit-tests.html#test-conditions"><i class="fa fa-check"></i><b>4.2</b> Test conditions</a></li>
<li class="chapter" data-level="4.3" data-path="unit-tests.html"><a href="unit-tests.html#test-driven-development"><i class="fa fa-check"></i><b>4.3</b> Test-Driven Development</a></li>
<li class="chapter" data-level="4.4" data-path="unit-tests.html"><a href="unit-tests.html#unit-testing-in-r"><i class="fa fa-check"></i><b>4.4</b> Unit testing in R</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Team Programming for Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="writing-reusable-code" class="section level1">
<h1><span class="header-section-number">3</span> Writing reusable code</h1>
<p>Because of its “statistical roots”, R is mostly used by statisticians and scientists - often lacking any software engineering skills. This means that the most common use case is an interactive console/RStudio session or a single-purpose script running on a fixed data set (and that’s why this chapter focuses on R, though some concepts you’ll find here are universal).</p>
<p>That’s fine. Until you want to run your analysis for different data. Or share your code with your colleagues.</p>
<p>Contrary to the popular belief, R is well suited to writing reusable software, or even (as you can see in other chapters) production-ready code. Its sophisticated package system, coupled with repositories like CRAN or GitHub, makes the development and distribution of programs or function libraries (packages) a breeze.</p>
<div id="r-packages" class="section level2">
<h2><span class="header-section-number">3.1</span> R packages</h2>
<p>R novices are intimidated by the concept of “packages” (as if it were something uncommon in programming), and creating your first package is considered as an initiation rite. Well, then, the entry threshold is really low…</p>
<p>Although R packages can be (and sometimes are) huge and complex, with hundreds of files in lots of nested subdirectories, the minimal package is actually two files (<code>DESCRIPTION</code> and <code>NAMESPACE</code>), and a subdirectory named <code>R/</code> where all your code goes. That’s it. You can create it manually in five minutes, but if you use RStudio, it’s not much more than a few clicks (<code>File -&gt; New project... -&gt; New Directory -&gt; R package</code>).</p>
<p>The “bible” and basic source of information on writing R packages is Hadley Wickham’s book titled (surprisingly) <a href="http://r-pkgs.had.co.nz/"><em>R Packages</em></a>.</p>
</div>
<div id="good-practices" class="section level2">
<h2><span class="header-section-number">3.2</span> Good practices</h2>
<ul>
<li><em>Never ever</em> use absolute paths (e.g., <code>C:\Documents\jdoe\R\scripts\myscript\data111.csv</code>) in your code. If you want to bundle data files with your program, put them in the <code>inst/extdata/</code> subdirectory of your package and access with <code>system.file(&quot;extdata&quot;, &quot;file.csv&quot;, package = &quot;mypackage&quot;)</code> (note: <code>inst</code> is dropped when your package is built, hence the lack of it in <code>system.file()</code> path).</li>
<li>It’s much better to split your code into separate .R files than to keep it all in one place. Commonly, each file comprises one exported function (a function that is “visible” outside your package and can be executed by its users) and - if needed - auxiliary functions used by the main function, and filename refers to that main function.</li>
<li>Instead of hard-coding constants/parameters used by your functions, try to pass them as function arguments. (You can assign them default values that will be used if the user doesn’t explicitly choose otherwise.)</li>
</ul>


</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="version-control-systems-git.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="unit-tests.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
